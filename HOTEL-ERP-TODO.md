# ğŸ¨ í˜¸í…” ERP ê°œë°œ ê³„íš

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡° (ì™„ì„±!)

### âœ… ìƒì„±ëœ í…Œì´ë¸” (11ê°œ)

1. **hotels** - í˜¸í…” ë§ˆìŠ¤í„°
   - ì§€ì—­, ì²´í¬ì¸/ì•„ì›ƒ ì‹œê°„ ì¶”ê°€

2. **booking_agencies** - ì˜ˆì•½ì—…ì²´ ê´€ë¦¬ â­ì‹ ê·œ
   - ì—…ì²´ì½”ë“œ, ìˆ˜ìˆ˜ë£Œìœ¨, ê²°ì œì¡°ê±´

3. **room_types** - ê°ì‹¤ íƒ€ì… (í‘œì¤€í™” + ë§¤í•‘)
   - B2B ë‚´ë¶€ ì½”ë“œ + í˜¸í…” ê³ ìœ  ê°ì‹¤ëª…
   - ìœ ì•„ ì¸ì› ì¶”ê°€

4. **room_availability** - ê°ì‹¤ ì¬ê³  ê´€ë¦¬ â­ë³´ì™„
   - ê°€ëŠ¥ ê°ì‹¤ ìˆ˜, ì´ ë°°ì •, ì˜ˆì•½ ìˆ˜
   - ìƒíƒœ: available, closed, soldout

5. **availability_uploads** - ì¬ê³  ì—…ë¡œë“œ íˆìŠ¤í† ë¦¬

6. **promotions** - í”„ë¡œëª¨ì…˜/íŠ¹ê°€ ê´€ë¦¬ â­ì‹ ê·œ
   - í”„ë¡œëª¨ì…˜ ì½”ë“œ, í• ì¸ íƒ€ì…, ì ìš© ê¸°ê°„

7. **rate_conditions** - ì·¨ì†Œ/ë³€ê²½ ê·œì • â­ì‹ ê·œ
   - ì·¨ì†Œ ì •ì±…, ë³€ê²½ ìˆ˜ìˆ˜ë£Œ, ì„ ê²°ì œ ì—¬ë¶€

8. **room_rates** - ìš”ê¸ˆ ê·¸ë¦¬ë“œ (í•µì‹¬!) â­ì‹ ê·œ
   - ë‚ ì§œë³„/ìš”ì¼ë³„ ìš”ê¸ˆ
   - í”„ë¡œëª¨ì…˜ ì—°ë™, ìµœì†Œ/ìµœëŒ€ ìˆ™ë°•ì¼

9. **hotel_reservations** - í˜¸í…” ì˜ˆì•½
   - íŒë§¤ê°€/ì›ê°€, ì˜ˆì•½ì—…ì²´, í”„ë¡œëª¨ì…˜ ì½”ë“œ
   - ìœ ì•„ ì¸ì›, í•­ê³µí¸ ì •ë³´

10. **hotel_assignments** - í˜¸í…” ìˆ˜ë°° ê´€ë¦¬

11. **hotel_settlements** - í˜¸í…” ì •ì‚° ê´€ë¦¬ â­ì‹ ê·œ
    - íŒë§¤ê°€, ì›ê°€, ë§ˆì§„, ìˆ˜ìˆ˜ë£Œ
    - ì…ê¸ˆ/ì†¡ê¸ˆ ì²˜ë¦¬

---

## ğŸ—‚ï¸ ë©”ë‰´ êµ¬ì¡°

```
ëŒ€ì‹œë³´ë“œ
â”œâ”€â”€ ì¸ë°•ìŠ¤ (í˜¸í…” ì˜ˆì•½ íŒŒì‹±)
â”œâ”€â”€ ìˆ˜ë°°ê´€ë¦¬
â”œâ”€â”€ ì •ì‚°ê´€ë¦¬
â”œâ”€â”€ í˜¸í…”ê´€ë¦¬ â­
â”œâ”€â”€ ê°ì‹¤íƒ€ì… â­
â”œâ”€â”€ ê°ì‹¤ì¬ê³  â­â­
â”œâ”€â”€ ìš”ê¸ˆRAG â­â­â­ (í•µì‹¬!)
â”‚   â”œâ”€â”€ ìš”ê¸ˆê·¸ë¦¬ë“œ
â”‚   â”œâ”€â”€ í”„ë¡œëª¨ì…˜ê´€ë¦¬
â”‚   â””â”€â”€ ìš”ê¸ˆì¡°ê±´
â””â”€â”€ ì„¤ì •
    â”œâ”€â”€ ì˜ˆì•½ì—…ì²´ê´€ë¦¬
    â””â”€â”€ ì§ì›ê³„ì •ê´€ë¦¬
```

---

## ğŸ“‹ Phase 1: ë§ˆìŠ¤í„° ë°ì´í„° êµ¬ì¶• (1-2ì¼)

### âœ… 1.0 ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ìƒì„±
- [x] `create-hotel-erp-tables-v2.js` ì‘ì„± ì™„ë£Œ
- [ ] í…Œì´ë¸” ìƒì„± ì‹¤í–‰: `node create-hotel-erp-tables-v2.js`
- [ ] í…Œì´ë¸” ë° ì»¬ëŸ¼ í™•ì¸

### ğŸ“ 1.1 í˜¸í…” ê´€ë¦¬ í˜ì´ì§€
**í˜ì´ì§€**: `/admin/hotels`

**UI êµ¬ì„±**:
- í˜¸í…” ëª©ë¡ í…Œì´ë¸” (ì§€ì—­ë³„ í•„í„°)
- í˜¸í…” ë“±ë¡/ìˆ˜ì • ëª¨ë‹¬
- ê²€ìƒ‰ ê¸°ëŠ¥ (í˜¸í…”ëª…, ì§€ì—­)

**í•„ë“œ**:
- í˜¸í…”ì½”ë“œ, í˜¸í…”ëª…(í•œê¸€/ì˜ë¬¸)
- ì§€ì—­ (íƒ€ë¬´ë‹, íˆ¬ëª¬, í•˜ê°“ëƒ ë“±)
- ì£¼ì†Œ, ì—°ë½ì²˜, ì´ë©”ì¼
- ê¸°ë³¸ ì²´í¬ì¸/ì•„ì›ƒ ì‹œê°„
- ì„¤ëª…, í™œì„±í™” ì—¬ë¶€

**API**:
- [ ] `GET /api/hotels` - ëª©ë¡ ì¡°íšŒ
- [ ] `GET /api/hotels/:id` - ìƒì„¸ ì¡°íšŒ
- [ ] `POST /api/hotels` - ë“±ë¡
- [ ] `PUT /api/hotels/:id` - ìˆ˜ì •
- [ ] `DELETE /api/hotels/:id` - ì‚­ì œ (ì†Œí”„íŠ¸)

**íŒŒì¼**:
- [ ] `views/admin/hotels.ejs` - í”„ë¡ íŠ¸ì—”ë“œ
- [ ] `routes/hotels.js` - API ë¼ìš°í„°
- [ ] `server-postgresql.js`ì— ë¼ìš°í„° ì—°ê²°

---

### ğŸ“ 1.2 ê°ì‹¤ íƒ€ì… ê´€ë¦¬
**í˜ì´ì§€**: `/admin/room-types`

**UI êµ¬ì„±**:
- í˜¸í…” ì„ íƒ ë“œë¡­ë‹¤ìš´
- ê°ì‹¤ íƒ€ì… ëª©ë¡
- ê°ì‹¤ íƒ€ì… ë“±ë¡/ìˆ˜ì • ëª¨ë‹¬

**í•„ë“œ**:
- í˜¸í…” ì„ íƒ
- B2B ë‚´ë¶€ ì½”ë“œ (ìë™ ìƒì„± ì˜µì…˜)
- B2B í‘œì¤€ ê°ì‹¤ëª…
- í˜¸í…” ê³ ìœ  ê°ì‹¤ëª…
- ìµœëŒ€ ì¸ì› (ì„±ì¸/ì†Œì•„/ìœ ì•„/ì´ì›)
- ê¸°ë³¸ ìš”ê¸ˆ ì •ë³´ (ì°¸ê³ ìš©)
- ì„¤ëª…

**API**:
- [ ] `GET /api/room-types?hotelId=` - í˜¸í…”ë³„ ëª©ë¡
- [ ] `GET /api/room-types/:id` - ìƒì„¸
- [ ] `POST /api/room-types` - ë“±ë¡
- [ ] `PUT /api/room-types/:id` - ìˆ˜ì •
- [ ] `DELETE /api/room-types/:id` - ì‚­ì œ

**íŒŒì¼**:
- [ ] `views/admin/room-types.ejs`
- [ ] `routes/room-types.js`

---

### ğŸ“ 1.3 ì˜ˆì•½ì—…ì²´ ê´€ë¦¬
**í˜ì´ì§€**: `/admin/settings` (íƒ­ìœ¼ë¡œ ì¶”ê°€)

**UI êµ¬ì„±**:
- ì˜ˆì•½ì—…ì²´ ëª©ë¡
- ì—…ì²´ ë“±ë¡/ìˆ˜ì • ëª¨ë‹¬

**í•„ë“œ**:
- ì—…ì²´ì½”ë“œ, ì—…ì²´ëª…
- ì—…ì²´ ìœ í˜• (B2C, B2B, OTA)
- ë‹´ë‹¹ì, ì—°ë½ì²˜, ì´ë©”ì¼
- ìˆ˜ìˆ˜ë£Œìœ¨ (%)
- ê²°ì œ ì¡°ê±´
- í™œì„±í™” ì—¬ë¶€

**API**:
- [ ] `GET /api/booking-agencies` - ëª©ë¡
- [ ] `GET /api/booking-agencies/:id` - ìƒì„¸
- [ ] `POST /api/booking-agencies` - ë“±ë¡
- [ ] `PUT /api/booking-agencies/:id` - ìˆ˜ì •
- [ ] `DELETE /api/booking-agencies/:id` - ì‚­ì œ

**íŒŒì¼**:
- [ ] ê¸°ì¡´ `views/admin/settings.ejs` ìˆ˜ì •
- [ ] `routes/booking-agencies.js`

---

## ğŸ“‹ Phase 1.5: ê°ì‹¤ ì¬ê³  ê´€ë¦¬ (1-2ì¼) â­â­

### ğŸ“ 1.5 ê°ì‹¤ ì¬ê³  ê´€ë¦¬
**í˜ì´ì§€**: `/admin/room-inventory`

**UI êµ¬ì„±**:
- í˜¸í…”/ê°ì‹¤íƒ€ì… ì„ íƒ
- ì›”ë³„ ë‹¬ë ¥ ê·¸ë¦¬ë“œ
- ë‚ ì§œë³„ ì¬ê³  í˜„í™© (ê°€ëŠ¥ìˆ˜/ì´ë°°ì •)
- ìƒ‰ìƒ ì½”ë“œ (ì´ˆë¡/ë…¸ë‘/ë¹¨ê°•/íšŒìƒ‰)

**ê¸°ëŠ¥**:
1. **ë‹¬ë ¥ ê·¸ë¦¬ë“œ ë·°**
   - ì›”ë³„ ë‹¬ë ¥ í˜•íƒœ
   - ê° ë‚ ì§œì— "ê°€ëŠ¥ìˆ˜/ì´ë°°ì •" í‘œì‹œ
   - í´ë¦­ìœ¼ë¡œ ê°œë³„ ìˆ˜ì •

2. **ì¼ê´„ ì…ë ¥**
   - ì‹œì‘ì¼/ì¢…ë£Œì¼ ì„ íƒ
   - ìš”ì¼ ì„ íƒ (ì›”/í™”/ìˆ˜/ëª©/ê¸ˆ/í† /ì¼)
   - ì´ ë°°ì • ê°ì‹¤ ìˆ˜ ì…ë ¥
   - ë¯¸ë¦¬ë³´ê¸° í›„ ì ìš©

3. **ì—‘ì…€ ì—…ë¡œë“œ**
   - CSV/Excel íŒŒì¼ ì—…ë¡œë“œ
   - íŒŒì‹± í›„ ì¼ê´„ ë“±ë¡
   - ì˜¤ë¥˜ í–‰ í‘œì‹œ

**API**:
- [ ] `GET /api/room-inventory?hotelId=&roomTypeId=&month=` - ì›”ë³„ ì¡°íšŒ
- [ ] `POST /api/room-inventory` - ê°œë³„ ë“±ë¡/ìˆ˜ì •
- [ ] `POST /api/room-inventory/bulk` - ê¸°ê°„+ìš”ì¼ ì¼ê´„
- [ ] `POST /api/room-inventory/upload` - ì—‘ì…€ ì—…ë¡œë“œ
- [ ] `PUT /api/room-inventory/:id` - ê°œë³„ ìˆ˜ì •

**ì¬ê³  ì°¨ê° ë¡œì§**:
```javascript
// ì˜ˆì•½ ìƒì„± ì‹œ
1. room_availability ì¡°íšŒ
2. available_rooms > 0 í™•ì¸
3. booked_rooms += 1
4. available_rooms = total_allocation - booked_rooms
5. available_rooms == 0 â†’ status = 'soldout'

// ì˜ˆì•½ ì·¨ì†Œ ì‹œ
1. booked_rooms -= 1
2. available_rooms = total_allocation - booked_rooms
3. status = 'available' (soldout í•´ì œ)
```

**íŒŒì¼**:
- [ ] `views/admin/room-inventory.ejs`
- [ ] `routes/room-inventory.js`

---

## ğŸ“‹ Phase 2: ìš”ê¸ˆRAG êµ¬ì¶• (2-3ì¼) â­â­â­

### ğŸ“ 2.1 ìš”ê¸ˆ ê·¸ë¦¬ë“œ ê´€ë¦¬
**í˜ì´ì§€**: `/admin/rate-grid`

**UI êµ¬ì„±**:
- í˜¸í…”/ê°ì‹¤íƒ€ì… ì„ íƒ
- ì›”ë³„ ìš”ê¸ˆ ë‹¬ë ¥ ê·¸ë¦¬ë“œ
- ìš”ê¸ˆ ì¼ê´„ ì…ë ¥ íŒ¨ë„

**ê¸°ëŠ¥**:
1. **ë‹¬ë ¥ ìš”ê¸ˆ ê·¸ë¦¬ë“œ**
   - ë‚ ì§œë³„ ìš”ê¸ˆ í‘œì‹œ
   - í”„ë¡œëª¨ì…˜ ì ìš© ì‹œ ìƒ‰ìƒ í‘œì‹œ
   - í´ë¦­ìœ¼ë¡œ ê°œë³„ ìˆ˜ì •

2. **ê¸°ê°„ë³„ ì¼ê´„ ì…ë ¥**
   - ì‹œì‘ì¼/ì¢…ë£Œì¼
   - ìš”ì¼ ì„ íƒ
   - ê°ì‹¤ ìš”ê¸ˆ, ì¡°ì‹ ìš”ê¸ˆ
   - ìµœì†Œ/ìµœëŒ€ ìˆ™ë°•ì¼
   - í”„ë¡œëª¨ì…˜ ì—°ë™

3. **ì—‘ì…€ ì—…ë¡œë“œ**
   - CSV í˜•ì‹ ì—…ë¡œë“œ
   - ëŒ€ëŸ‰ ìš”ê¸ˆ ë“±ë¡

**API**:
- [ ] `GET /api/room-rates?roomTypeId=&month=` - ì›”ë³„ ìš”ê¸ˆ ì¡°íšŒ
- [ ] `POST /api/room-rates` - ìš”ê¸ˆ ë“±ë¡
- [ ] `POST /api/room-rates/bulk` - ê¸°ê°„+ìš”ì¼ ì¼ê´„
- [ ] `POST /api/room-rates/upload` - ì—‘ì…€ ì—…ë¡œë“œ
- [ ] `PUT /api/room-rates/:id` - ìˆ˜ì •
- [ ] `DELETE /api/room-rates/:id` - ì‚­ì œ

**ìš”ê¸ˆ ì¡°íšŒ API (B2Bìš© í•µì‹¬!)**:
- [ ] `GET /api/room-rates/search` - ì¡°ê±´ë³„ ìš”ê¸ˆ ì¡°íšŒ
  - íŒŒë¼ë¯¸í„°: hotelId, checkIn, checkOut, adults, children
  - ì‘ë‹µ: ê°ì‹¤íƒ€ì…ë³„ ìš”ê¸ˆ, í”„ë¡œëª¨ì…˜, ì¡°ê±´

**íŒŒì¼**:
- [ ] `views/admin/rate-grid.ejs`
- [ ] `routes/room-rates.js`

---

### ğŸ“ 2.2 í”„ë¡œëª¨ì…˜ ê´€ë¦¬
**í˜ì´ì§€**: `/admin/promotions`

**UI êµ¬ì„±**:
- í”„ë¡œëª¨ì…˜ ëª©ë¡
- í”„ë¡œëª¨ì…˜ ë“±ë¡/ìˆ˜ì • ëª¨ë‹¬

**í•„ë“œ**:
- í”„ë¡œëª¨ì…˜ ì½”ë“œ (ì˜ˆ: EARLY2024)
- í”„ë¡œëª¨ì…˜ëª…
- ìœ í˜• (EARLY_BIRD, LAST_MINUTE, PACKAGE ë“±)
- ì ìš© ê¸°ê°„ (ì‹œì‘ì¼/ì¢…ë£Œì¼)
- í• ì¸ íƒ€ì… (%, ê³ ì •ê¸ˆì•¡)
- í• ì¸ ê°’
- ì„¤ëª…, ì•½ê´€
- í™œì„±í™” ì—¬ë¶€

**API**:
- [ ] `GET /api/promotions` - ëª©ë¡
- [ ] `GET /api/promotions/:id` - ìƒì„¸
- [ ] `POST /api/promotions` - ë“±ë¡
- [ ] `PUT /api/promotions/:id` - ìˆ˜ì •
- [ ] `DELETE /api/promotions/:id` - ì‚­ì œ
- [ ] `GET /api/promotions/validate?code=` - ì½”ë“œ ìœ íš¨ì„± ê²€ì¦

**íŒŒì¼**:
- [ ] `views/admin/promotions.ejs`
- [ ] `routes/promotions.js`

---

### ğŸ“ 2.3 ìš”ê¸ˆ ì¡°ê±´ ê´€ë¦¬
**í˜ì´ì§€**: `/admin/rate-conditions`

**UI êµ¬ì„±**:
- ìš”ê¸ˆ ì¡°ê±´ ëª©ë¡
- ì¡°ê±´ ë“±ë¡/ìˆ˜ì • ëª¨ë‹¬

**í•„ë“œ**:
- ì¡°ê±´ ì½”ë“œ, ì¡°ê±´ëª…
- ì·¨ì†Œ ì •ì±… (JSONB)
  - ì˜ˆ: [{days_before: 7, penalty_rate: 100}, {days_before: 14, penalty_rate: 50}]
- ë³€ê²½ í—ˆìš© ì—¬ë¶€
- ë³€ê²½ ìˆ˜ìˆ˜ë£Œ
- ì„ ê²°ì œ í•„ìš” ì—¬ë¶€
- í™˜ë¶ˆ ê°€ëŠ¥ ì—¬ë¶€
- ì„¤ëª…

**API**:
- [ ] `GET /api/rate-conditions` - ëª©ë¡
- [ ] `GET /api/rate-conditions/:id` - ìƒì„¸
- [ ] `POST /api/rate-conditions` - ë“±ë¡
- [ ] `PUT /api/rate-conditions/:id` - ìˆ˜ì •
- [ ] `DELETE /api/rate-conditions/:id` - ì‚­ì œ

**íŒŒì¼**:
- [ ] `views/admin/rate-conditions.ejs`
- [ ] `routes/rate-conditions.js`

---

## ğŸ“‹ Phase 3: ìš´ì˜ í˜ì´ì§€ (2-3ì¼)

### ğŸ“ 3.1 ì¸ë°•ìŠ¤ - í˜¸í…” ì˜ˆì•½ íŒŒì‹±
**í˜ì´ì§€**: ê¸°ì¡´ `/admin/inbox` ìˆ˜ì •

**ì¶”ê°€ íŒŒì‹± í•„ë“œ**:
- íˆ¬ìˆ™ê° í•œê¸€ì´ë¦„, ì˜ë¬¸ì´ë¦„
- í˜¸í…”ëª…
- ë£¸íƒ€ì…
- ì¡°ì‹ íšŸìˆ˜
- ì²´í¬ì¸/ì²´í¬ì•„ì›ƒ
- ì„±ì¸/ì†Œì•„/ìœ ì•„ êµ¬ë¶„
- ì´ìš© í•­ê³µí¸ (ë„ì°©/ì¶œë°œ)
- íŒë§¤ê°€, ì›ê°€

**ìˆ˜ì •ì‚¬í•­**:
- [ ] OpenAI íŒŒì‹± í”„ë¡¬í”„íŠ¸ì— í˜¸í…” í•„ë“œ ì¶”ê°€
- [ ] íŒŒì‹± ê²°ê³¼ë¥¼ `hotel_reservations` í…Œì´ë¸”ì— ì €ì¥
- [ ] ì˜ˆì•½ ìƒì„± ì‹œ `room_availability`ì˜ `booked_rooms` ì¦ê°€

**íŒŒì¼**:
- [ ] `views/admin/inbox.ejs` ìˆ˜ì •
- [ ] `utils/aiParser.js` ìˆ˜ì • (í˜¸í…” íŒŒì‹± ë¡œì§)

---

### ğŸ“ 3.2 ìˆ˜ë°°ê´€ë¦¬
**í˜ì´ì§€**: `/admin/hotel-assignments`

**UI êµ¬ì„±**:
- ìˆ˜ë°° ëŒ€ê¸° ì˜ˆì•½ ëª©ë¡
- ìƒíƒœë³„ í•„í„° (ìˆ˜ë°°ì¤‘/í™•ì •/ì·¨ì†Œ)
- ìˆ˜ë°°ì„œ ìƒì„±/ë°œì†¡ ê¸°ëŠ¥
- ì»¨íŒ ë²ˆí˜¸ ì…ë ¥

**ì›Œí¬í”Œë¡œìš°**:
```
ëŒ€ê¸°ì¤‘ â†’ ìˆ˜ë°°ì¤‘ â†’ í™•ì • â†’ ë°”ìš°ì²˜ì „ì†¡ì™„ë£Œ â†’ ì •ì‚°ì™„ë£Œ
```

**ê¸°ëŠ¥**:
1. ìˆ˜ë°°ì„œ ìƒì„± (PDF/ì´ë©”ì¼)
2. ìˆ˜ë°°ì„œ ë°œì†¡ (ì´ë©”ì¼/ì¹´ì¹´ì˜¤í†¡)
3. ì»¨íŒ ë²ˆí˜¸ ì…ë ¥
4. ìƒíƒœ ë³€ê²½

**API**:
- [ ] `GET /api/hotel-assignments` - ëª©ë¡
- [ ] `GET /api/hotel-assignments/:id` - ìƒì„¸
- [ ] `POST /api/hotel-assignments` - ìˆ˜ë°°ì„œ ìƒì„±
- [ ] `PUT /api/hotel-assignments/:id` - ìˆ˜ì •
- [ ] `POST /api/hotel-assignments/:id/confirm` - í™•ì • ì²˜ë¦¬
- [ ] `POST /api/hotel-assignments/:id/send` - ìˆ˜ë°°ì„œ ë°œì†¡

**íŒŒì¼**:
- [ ] `views/admin/hotel-assignments.ejs`
- [ ] `routes/hotel-assignments.js`

---

### ğŸ“ 3.3 ì •ì‚°ê´€ë¦¬
**í˜ì´ì§€**: `/admin/hotel-settlements`

**UI êµ¬ì„±**:
- ë¯¸ì™„ë£Œ ëª©ë¡ / ì™„ë£Œ ëª©ë¡
- ì…ê¸ˆ/ì†¡ê¸ˆ ì²´í¬
- ë§ˆì§„/ìˆ˜ìˆ˜ë£Œ ìë™ ê³„ì‚°
- í†µê³„ (ë¯¸ì…ê¸ˆ/ë¯¸ì†¡ê¸ˆ/ì›”ê°„)

**ê¸°ëŠ¥**:
1. ì •ì‚° ìƒì„± (ì˜ˆì•½ì—ì„œ ìë™)
2. ì…ê¸ˆ ì²˜ë¦¬
3. ì†¡ê¸ˆ ì²˜ë¦¬
4. ì •ì‚° ìˆ˜ì •/ì‚­ì œ

**API**:
- [ ] `GET /api/hotel-settlements` - ëª©ë¡
- [ ] `GET /api/hotel-settlements/stats` - í†µê³„
- [ ] `GET /api/hotel-settlements/:id` - ìƒì„¸
- [ ] `PUT /api/hotel-settlements/:id` - ìˆ˜ì •
- [ ] `POST /api/hotel-settlements/:id/payment` - ì…ê¸ˆ/ì†¡ê¸ˆ ì²˜ë¦¬
- [ ] `POST /api/hotel-settlements/bulk-payment` - ì¼ê´„ ì…ê¸ˆ/ì†¡ê¸ˆ
- [ ] `DELETE /api/hotel-settlements/:id` - ì‚­ì œ

**íŒŒì¼**:
- [ ] `views/admin/hotel-settlements.ejs`
- [ ] `routes/hotel-settlements.js`

---

## ğŸ“‹ Phase 4: ëŒ€ì‹œë³´ë“œ & ë¶€ê°€ê¸°ëŠ¥ (1ì¼)

### ğŸ“ 4.1 ëŒ€ì‹œë³´ë“œ
**í˜ì´ì§€**: `/admin/hotel-dashboard`

**UI êµ¬ì„±**:
- ì˜¤ëŠ˜ ì²´í¬ì¸/ì²´í¬ì•„ì›ƒ í˜„í™©
- í˜¸í…”ë³„ ì˜ˆì•½ í˜„í™©
- ì›”ê°„ í†µê³„ (ì˜ˆì•½ ê±´ìˆ˜, ë§ˆì§„)
- ì¬ê³  í˜„í™© (ë§ˆê° ì„ë°• ê°ì‹¤)

**API**:
- [ ] `GET /api/hotel-dashboard/stats` - ì „ì²´ í†µê³„
- [ ] `GET /api/hotel-dashboard/today` - ì˜¤ëŠ˜ í˜„í™©
- [ ] `GET /api/hotel-dashboard/monthly` - ì›”ê°„ í†µê³„

**íŒŒì¼**:
- [ ] `views/admin/hotel-dashboard.ejs`
- [ ] `routes/hotel-dashboard.js`

---

## ğŸ¯ ê°œë°œ ìš°ì„ ìˆœìœ„ ìš”ì•½

1. âœ… **DB í…Œì´ë¸” ìƒì„±** (ì™„ë£Œ)
2. **Phase 1**: í˜¸í…”ê´€ë¦¬ + ê°ì‹¤íƒ€ì… + ì˜ˆì•½ì—…ì²´ (1-2ì¼)
3. **Phase 1.5**: ê°ì‹¤ ì¬ê³  ê´€ë¦¬ â­â­ (1-2ì¼)
4. **Phase 2**: ìš”ê¸ˆRAG (ìš”ê¸ˆê·¸ë¦¬ë“œ + í”„ë¡œëª¨ì…˜ + ì¡°ê±´) â­â­â­ (2-3ì¼)
5. **Phase 3**: ì¸ë°•ìŠ¤ + ìˆ˜ë°°ê´€ë¦¬ + ì •ì‚°ê´€ë¦¬ (2-3ì¼)
6. **Phase 4**: ëŒ€ì‹œë³´ë“œ (1ì¼)

**ì´ ì˜ˆìƒ ê¸°ê°„**: 7-11ì¼

---

## ğŸš€ ì‹œì‘í•˜ê¸°

### 1ë‹¨ê³„: ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ìƒì„±
```bash
node create-hotel-erp-tables-v2.js
```

### 2ë‹¨ê³„: Phase 1ë¶€í„° ìˆœì°¨ ì§„í–‰
ê° Phase ì™„ë£Œ í›„ Git commit & push

### 3ë‹¨ê³„: í…ŒìŠ¤íŠ¸ & ë°°í¬
Railway ìë™ ë°°í¬ í™•ì¸

---

## ğŸ“ ì°¸ê³ ì‚¬í•­

### ì¬ê³  ì°¨ê° ìë™í™”
- ì˜ˆì•½ ìƒì„± ì‹œ: `booked_rooms++`, `available_rooms--`
- ì˜ˆì•½ ì·¨ì†Œ ì‹œ: `booked_rooms--`, `available_rooms++`
- `available_rooms == 0` â†’ `status = 'soldout'`

### ìš”ê¸ˆ ê³„ì‚° ë¡œì§
```javascript
ì´ ê¸ˆì•¡ = ê°ì‹¤ ìš”ê¸ˆ + (ì¡°ì‹ ìš”ê¸ˆ Ã— ì¡°ì‹ ì¸ì›) + ì¶”ê°€ ì¸ì› ìš”ê¸ˆ
ë§ˆì§„ = íŒë§¤ê°€ - ì›ê°€
ìˆ˜ìˆ˜ë£Œ = íŒë§¤ê°€ Ã— ìˆ˜ìˆ˜ë£Œìœ¨
```

### í”„ë¡œëª¨ì…˜ ì ìš©
```javascript
í• ì¸ ê¸ˆì•¡ = í• ì¸íƒ€ì… === 'PERCENTAGE' 
  ? ê°ì‹¤ ìš”ê¸ˆ Ã— (í• ì¸ê°’ / 100)
  : í• ì¸ê°’
ìµœì¢… ìš”ê¸ˆ = ê°ì‹¤ ìš”ê¸ˆ - í• ì¸ ê¸ˆì•¡
```

---

**ì‘ì—… ì‹œì‘ ì¤€ë¹„ ì™„ë£Œ!** ğŸ‰
